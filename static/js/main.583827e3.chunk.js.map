{"version":3,"sources":["redux/authentication.action.ts","components/Message.tsx","components/Login.tsx","redux/game.action.ts","redux/lobby.action.ts","communication/webSocketServerApi.ts","components/board/PlayerIdList.tsx","components/Lobby.tsx","components/board/PlayingCard.tsx","components/board/SelectableCardList.tsx","components/board/Hand.tsx","components/Badge.tsx","components/board/Player.tsx","components/board/PlayerStateList.tsx","redux/gameState.reducer.ts","components/TextSecondTimer.tsx","components/board/Overview.tsx","components/board/Turn.tsx","components/board/TurnList.tsx","components/board/LastPlayedMaxCard.tsx","components/hideAfterTimeout.tsx","components/board/TurnStack.tsx","components/board/PlayedTurns.tsx","components/board/Board.tsx","components/Game.tsx","components/Header.tsx","components/App.tsx","serviceWorker.ts","theme.ts","redux/authentication.reducer.ts","redux/gamePlayers.reducer.ts","redux/game.reducer.ts","redux/lobby.reducer.ts","redux/root.reducer.ts","redux/store.ts","index.tsx"],"names":["authenticateWithToken","token","subject","type","unauthenticateWithError","message","authenticationError","extractSubjectFromToken","jwtDecode","sub","MessageBox","styled","Box","theme","severity","palette","main","Message","children","padding","connect","state","error","authentication","isRequestingAuthentication","isRequesting","dispatch","useState","nameInput","setNameInput","tokenInput","setTokenInput","Container","maxWidth","Typography","variant","gutterBottom","marginBottom","onSubmit","event","data","name","fetch","process","method","mode","headers","body","JSON","stringify","then","response","a","ok","json","jwt","preventDefault","TextField","label","id","value","onChange","target","fullWidth","margin","size","required","autoFocus","Button","disabled","color","CircularProgress","addOutPlayers","outPlayers","setIsInGame","isInGame","sendStartGame","next","MessageName","START_GAME","sendPlayCards","cards","PLAY_CARDS","sendAuthenticate","AUTHENTICATE","PlayerIdList","playerItems","playerIds","map","playerId","ListItem","key","ListItemText","List","lobby","players","startGame","onClick","Card","Paper","selected","primary","breakpoints","values","sm","md","Image","img","generateCardKey","card","kind","JOKER_CARD_KIND","rank","suit","JokerCard","lowercaseColor","toLowerCase","src","alt","SuitCard","lowercaseSuit","cardSrcFile","PlayingCardPlaceholder","elevation","PlayingCard","isSelected","Flex","OverlappingBox","byRankAsc","first","second","Math","sign","CardList","handleSelect","cardItems","sort","ButtonBase","PlayTurn","handlePlayClick","Hand","playCards","cardsInHand","isServerRequestingCards","selectableCards","setSelectableCards","useEffect","clicked","cardEquals","selectedCards","filter","span","typography","caption","fontSize","opacityPulse","keyframes","PlayerName","props","isOut","ActivePlayerName","InactivePlayerName","Player","player","penaltySum","penalties","reduce","accumulator","current","Badge","byOrderAsc","order","ActiveOrderedPlayers","activePlayers","orderedActivePlayers","currentActivePlayerIndex","findIndex","activePlayerItems","isCompleted","Step","active","completed","StepLabel","length","Stepper","orientation","OutPlayers","outPlayerItems","secondary","outReason","PlayerStateList","GameStage","TextSecondTimer","timeoutInSeconds","timeLeftInSeconds","setTimeLeftInSeconds","interval","setInterval","clearInterval","prevState","INITIAL_STATE","stage","START","validatedTurns","isLastCycleOfRound","turnTimeoutInMillis","undefined","turnRetriesLeft","BoldTypography","YourTurn","turnTimeoutInSeconds","Grid","container","justify","alignItems","TheirTurn","currentTurnPlayer","find","TurnIndicator","HighestCyclePlayers","highestCyclePlayerIds","isCycleHighestTurnPlayer","join","RoundWinner","roundWinner","isRoundWinner","GameWinner","gameWinner","isGameWinner","Overview","gameStage","IN_CYCLE","BETWEEN_CYCLES","BETWEEN_ROUNDS","END","PlayerIdMaxWidthBox","div","cardCount","generateTurnKey","turn","valid","createCardItems","item","Valid","spacing","Tooltip","title","align","noWrap","Invalid","invalidReason","Turn","TurnList","turnItems","turns","reduceRight","acc","Centered","toMaxRankedCard","maxRankCard","currentCard","compareRanks","LastPlayedMaxCard","playedCards","playedTurns","flatMap","highestPlayedCard","timeoutInMillis","InvalidTurnHiddenAfterTimeout","Component","isHidden","setIsHidden","timeoutId","setTimeout","clearTimeout","MostRecentTurn","mostRecentTurn","TurnStack","PlayedTurns","CenteredFlex","OverviewBox","PlayedTurnsBox","HandBox","PlayersBox","NavigationBox","ownProps","game","playerState","serverApi","closeGame","respondToAuthenticationRequestFromServer","authenticationToken","pipe","REQUEST_AUTHENTICATION","subscribe","bind","createAuthenticationApi","handleMessagesFromServer","BROADCAST_LOBBY_PLAYERS","BROADCAST_START_GAME","BROADCAST_END_GAME","isValid","winner","errorMessage","BROADCAST_START_ROUND","startRound","BROADCAST_END_ROUND","endRound","BROADCAST_START_CYCLE","orderedPlayerIds","orderedPlayers","isLastOfRound","BROADCAST_END_CYCLE","highestTurnPlayerIds","highestTurnPlayers","BROADCAST_PLAYER_TURN","AVAILABLE_CARDS_IN_HAND","REQUEST_CARDS","retriesLeft","BROADCAST_START_PLAYER_TURN","BROADCAST_OUT_PLAYER_AFTER_TURN","dispatchWebSocketMessageAsActions","authenticatedSubject","webSocketSubject","webSocket","url","closeObserver","closeEvent","reason","gameApi","createGameApi","complete","Header","AppBar","position","Toolbar","href","isAuthenticated","paddingTop","Boolean","window","location","hostname","match","createMuiTheme","h1","h2","h3","h4","h5","h6","light","dark","contrastText","warning","info","success","responsiveFontSizes","LOWEST_ORDER_PRECEDENCE","Number","MAX_SAFE_INTEGER","filterPenaltiesForPlayerId","penalty","isPlayerIdOneOfHighestTurnPlayers","some","highestTurnPlayerId","isPlayerWithIdOut","outPlayer","findPlayerOutReason","foundOutPlayer","findPlayerOrder","orderedActivePlayerIds","foundIndex","INITIAL_PLAYER_STATE","combineReducers","action","BEFORE_CYCLE","gameReducer","createStore","reducer","composeWithDevTools","applyMiddleware","thunk","ReactDOM","render","store","injectFirst","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.583827e3.chunk.js","sourcesContent":["import { Action, Dispatch } from 'redux';\nimport jwtDecode from 'jwt-decode';\nimport { AuthenticationBody, JwtPayload } from 'agurk-shared';\n\nconst API_SERVER_URI = process.env.REACT_APP_API_SERVER_URI as string;\n\nexport const AUTHENTICATE_WITH_TOKEN = 'AUTHENTICATE_WITH_TOKEN';\nexport const AUTHENTICATION_ERROR = 'AUTHENTICATION_ERROR';\nexport const REQUEST_AUTHENTICATION = 'REQUEST_AUTHENTICATION';\nexport const UNAUTHENTICATE_WITH_ERROR = 'UNAUTHENTICATE_WITH_ERROR';\n\ninterface AuthenticateWithTokenAction extends Action<typeof AUTHENTICATE_WITH_TOKEN>{\n  readonly token: string;\n  readonly subject: string;\n}\n\ninterface AuthenticationError extends Action<typeof AUTHENTICATION_ERROR>{\n  readonly message: string;\n}\n\ninterface UnauthenticateWithErrorAction extends Action<typeof UNAUTHENTICATE_WITH_ERROR>{\n  readonly message: string;\n}\n\ntype RequestAuthentication = Action<typeof REQUEST_AUTHENTICATION>;\n\nexport type AuthenticationAction = AuthenticateWithTokenAction | AuthenticationError | UnauthenticateWithErrorAction |\n  RequestAuthentication;\n\nexport function authenticateWithToken(token: string, subject: string): AuthenticationAction {\n  return {\n    type: AUTHENTICATE_WITH_TOKEN,\n    token,\n    subject,\n  };\n}\n\nexport function unauthenticateWithError(message: string): AuthenticationAction {\n  return {\n    type: UNAUTHENTICATE_WITH_ERROR,\n    message,\n  };\n}\n\nexport function authenticationError(message: string): AuthenticationAction {\n  return {\n    type: AUTHENTICATION_ERROR,\n    message,\n  };\n}\n\nexport function requestAuthentication(): AuthenticationAction {\n  return {\n    type: REQUEST_AUTHENTICATION,\n  };\n}\n\nfunction extractSubjectFromToken(token: string) {\n  return (jwtDecode(token) as JwtPayload).sub;\n}\n\nexport function authenticate(data: AuthenticationBody) {\n  return function postAuthentication(dispatch: Dispatch<Action>) {\n    dispatch(requestAuthentication());\n    fetch(`${API_SERVER_URI}/authenticate`, {\n      method: 'POST',\n      mode: 'cors',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(data),\n    })\n      .then(async (response) => {\n        if (response.ok) {\n          const body = await response.json() as { jwt: string };\n          const token = body.jwt;\n          const subject = extractSubjectFromToken(body.jwt);\n          dispatch(authenticateWithToken(token, subject));\n        } else {\n          dispatch(authenticationError('Authentication failed'));\n        }\n      }, () => dispatch(authenticationError('Could not contact server. Try again later...')));\n  };\n}\n","import React, { ReactNode } from 'react';\nimport styled from 'styled-components';\nimport { Box } from '@material-ui/core';\nimport { Severity, Theme } from '../theme';\n\ninterface Props {\n  children: ReactNode | ReactNode[];\n  severity: Severity;\n}\n\nconst MessageBox = styled(Box)`\n  width: 100%;\n  color: white;\n  background-color: ${({ theme, severity }: { theme: Theme, severity: Severity }) => (theme.palette[severity].main)};\n  border-radius: 2px;\n`;\n\nexport default function Message({ children, severity }: Props) {\n  return (\n    <MessageBox padding={1} severity={severity}>\n      {children}\n    </MessageBox>\n  );\n}\n","import React, { ChangeEvent, FormEvent, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { ThunkDispatch } from 'redux-thunk';\nimport {\n  Button, Container, TextField, Typography, Box, CircularProgress,\n} from '@material-ui/core';\nimport { GameAction } from '../redux/game.action';\nimport { authenticate } from '../redux/authentication.action';\nimport { State } from '../redux/root.reducer';\nimport Message from './Message';\n\ninterface Props {\n  dispatch: ThunkDispatch<State, undefined, GameAction>;\n  error: string | undefined;\n  isRequestingAuthentication: boolean;\n}\n\nfunction Login({ dispatch, error, isRequestingAuthentication }: Props) {\n  const [nameInput, setNameInput] = useState<string>('');\n  const [tokenInput, setTokenInput] = useState<string>('');\n\n  function handleSubmit(event: FormEvent) {\n    dispatch(authenticate({ name: nameInput, token: tokenInput }));\n    event.preventDefault();\n  }\n\n  function handleNameChange(event: ChangeEvent<HTMLInputElement>) {\n    setNameInput(event.target.value);\n  }\n\n  function handleTokenChange(event: ChangeEvent<HTMLInputElement>) {\n    setTokenInput(event.target.value);\n  }\n\n  return (\n    <Container maxWidth=\"sm\">\n      <Typography variant=\"h1\" gutterBottom>Login</Typography>\n\n      <Box marginBottom={2}>\n        <form onSubmit={handleSubmit}>\n          <Box marginBottom={1}>\n            <TextField\n              variant=\"outlined\"\n              label=\"Player name\"\n              id=\"name\"\n              value={nameInput}\n              onChange={handleNameChange}\n              type=\"text\"\n              name=\"name\"\n              fullWidth\n              margin=\"dense\"\n              size=\"medium\"\n              required\n              autoFocus\n            />\n\n            <TextField\n              variant=\"outlined\"\n              label=\"Access token\"\n              id=\"token\"\n              value={tokenInput}\n              onChange={handleTokenChange}\n              type=\"password\"\n              name=\"token\"\n              fullWidth\n              margin=\"dense\"\n              size=\"medium\"\n              required\n            />\n          </Box>\n\n          <Button\n            size=\"large\"\n            fullWidth\n            variant={isRequestingAuthentication ? 'outlined' : 'contained'}\n            disabled={isRequestingAuthentication}\n            color=\"secondary\"\n            type=\"submit\"\n          >\n            { isRequestingAuthentication\n              ? <CircularProgress size={25} color=\"secondary\" />\n              : 'Log in'}\n          </Button>\n        </form>\n      </Box>\n\n      { error && <Message severity=\"error\"><Typography variant=\"body1\">{error}</Typography></Message> }\n    </Container>\n  );\n}\n\nconst mapStateToProps = (state: State) => ({\n  error: state.authentication.error,\n  isRequestingAuthentication: state.authentication.isRequesting,\n});\n\nexport default connect(mapStateToProps)(Login);\n","import {\n  Card, OutPlayer, Penalty, PlayerId, ValidatedTurn,\n} from 'agurk-shared';\nimport { Action } from 'redux';\n\nexport const START_GAME = 'START_GAME';\nexport const END_GAME_SUCCESS = 'END_GAME_SUCCESS';\nexport const END_GAME_ERROR = 'END_GAME_ERROR';\nexport const SET_CARDS_IN_HAND = 'SET_CARDS_IN_HAND';\nexport const ADD_PLAYER_TURN = 'ADD_PLAYER_TURN';\nexport const START_ROUND = 'START_ROUND';\nexport const END_ROUND = 'END_ROUND';\nexport const ADD_OUT_PLAYERS = 'SET_OUT_PLAYERS';\nexport const START_CYCLE = 'START_CYCLE';\nexport const END_CYCLE = 'END_CYCLE';\nexport const REQUEST_CARDS = 'REQUEST_CARDS';\nexport const START_PLAYER_TURN = 'START_PLAYER_TURN';\nexport const RESET_GAME = 'RESET_GAME';\n\ninterface AddOutPlayersAction extends Action<typeof ADD_OUT_PLAYERS> {\n  readonly outPlayers: OutPlayer[];\n}\n\ninterface StartGameAction extends Action<typeof START_GAME> {\n  readonly playerIds: PlayerId[];\n}\n\ninterface EndGameSuccessAction extends Action<typeof END_GAME_SUCCESS>{\n  readonly winner: PlayerId;\n}\n\ninterface EndGameErrorAction extends Action<typeof END_GAME_ERROR>{\n  readonly errorMessage: string;\n}\n\ninterface SetCardsInHandAction extends Action<typeof SET_CARDS_IN_HAND>{\n  readonly cards: Card[];\n}\n\ninterface StartPlayerTurnAction extends Action<typeof START_PLAYER_TURN>{\n  readonly playerId: PlayerId;\n}\n\ninterface AddPlayerTurnAction extends Action<typeof ADD_PLAYER_TURN>{\n  readonly turn: ValidatedTurn;\n}\n\ninterface StartRoundAction extends Action<typeof START_ROUND>{\n  readonly playerIds: PlayerId[];\n}\n\ninterface EndRoundAction extends Action<typeof END_ROUND>{\n  readonly winner: PlayerId | undefined;\n  readonly penalties: Penalty[];\n}\n\ninterface StartCycleAction extends Action<typeof START_CYCLE>{\n  readonly orderedPlayerIds: PlayerId[];\n  readonly isLastOfRound: boolean;\n}\n\ninterface EndCycleAction extends Action<typeof END_CYCLE>{\n  readonly highestTurnPlayerIds: PlayerId[];\n}\n\ninterface RequestCardsAction extends Action<typeof REQUEST_CARDS>{\n  readonly turnTimeoutInMillis: number;\n  readonly turnRetriesLeft: number;\n}\n\ninterface ResetGameAction extends Action<typeof RESET_GAME>{}\n\n\nexport type GameAction = StartGameAction | EndGameSuccessAction | EndGameErrorAction | SetCardsInHandAction |\n  AddPlayerTurnAction | StartRoundAction | EndRoundAction | StartCycleAction | EndCycleAction | RequestCardsAction |\n  StartPlayerTurnAction | ResetGameAction | AddOutPlayersAction;\n\nexport function startGame(playerIds: PlayerId[]): GameAction {\n  return {\n    type: START_GAME,\n    playerIds,\n  };\n}\n\nexport function resetGame(): GameAction {\n  return {\n    type: RESET_GAME,\n  };\n}\n\nexport function endGameError(errorMessage: string): GameAction {\n  return {\n    type: END_GAME_ERROR,\n    errorMessage,\n  };\n}\n\nexport function endGameSuccess(winner: PlayerId): GameAction {\n  return {\n    type: END_GAME_SUCCESS,\n    winner,\n  };\n}\n\nexport function setAvailableCardsInHand(cards: Card[]): GameAction {\n  return {\n    type: SET_CARDS_IN_HAND,\n    cards,\n  };\n}\n\nexport function addPlayerTurn(turn: ValidatedTurn): GameAction {\n  return {\n    type: ADD_PLAYER_TURN,\n    turn,\n  };\n}\n\nexport function startPlayerTurn(playerId: PlayerId): GameAction {\n  return {\n    type: START_PLAYER_TURN,\n    playerId,\n  };\n}\n\nexport function startRound(playerIds: PlayerId[]): GameAction {\n  return {\n    type: START_ROUND,\n    playerIds,\n  };\n}\n\nexport function addOutPlayers(outPlayers: OutPlayer[]): GameAction {\n  return {\n    type: ADD_OUT_PLAYERS,\n    outPlayers,\n  };\n}\n\nexport function endRound(winner: PlayerId | undefined, penalties: Penalty[]): GameAction {\n  return {\n    type: END_ROUND,\n    winner,\n    penalties,\n  };\n}\n\nexport function startCycle(orderedPlayerIds: PlayerId[], isLastOfRound: boolean): GameAction {\n  return {\n    type: START_CYCLE,\n    orderedPlayerIds,\n    isLastOfRound,\n  };\n}\n\nexport function endCycle(highestTurnPlayerIds: PlayerId[]): GameAction {\n  return {\n    type: END_CYCLE,\n    highestTurnPlayerIds,\n  };\n}\n\nexport function requestCards(turnTimeoutInMillis: number, turnRetriesLeft: number): GameAction {\n  return {\n    type: REQUEST_CARDS,\n    turnTimeoutInMillis,\n    turnRetriesLeft,\n  };\n}\n","import { PlayerId } from 'agurk-shared';\nimport { Action } from 'redux';\n\nexport const SET_LOBBY_PLAYERS = 'SET_LOBBY_PLAYERS';\nexport const SET_IS_IN_GAME = 'SET_IS_IN_GAME';\n\ninterface SetLobbyPlayersAction extends Action<typeof SET_LOBBY_PLAYERS> {\n  readonly playerIds: PlayerId[];\n}\n\ninterface SetIsInGameAction extends Action<typeof SET_IS_IN_GAME> {\n  readonly isInGame: boolean;\n}\n\nexport type LobbyAction = SetLobbyPlayersAction | SetIsInGameAction;\n\nexport function setLobbyPlayers(playerIds: PlayerId[]): LobbyAction {\n  return {\n    type: SET_LOBBY_PLAYERS,\n    playerIds,\n  };\n}\n\nexport function setIsInGame(isInGame: boolean): LobbyAction {\n  return {\n    type: SET_IS_IN_GAME,\n    isInGame,\n  };\n}\n","import {\n  Card,\n  Message,\n  MessageName,\n} from 'agurk-shared';\nimport { WebSocketSubject } from 'rxjs/webSocket';\nimport { Action, Dispatch } from 'redux';\nimport {\n  addOutPlayers,\n  addPlayerTurn,\n  endCycle,\n  endGameError,\n  endGameSuccess,\n  endRound,\n  requestCards,\n  setAvailableCardsInHand,\n  startCycle,\n  startGame, startPlayerTurn,\n  startRound,\n} from '../redux/game.action';\nimport { setIsInGame, setLobbyPlayers } from '../redux/lobby.action';\n\nexport interface WebSocketGameApi {\n  sendStartGame: () => void;\n  sendPlayCards: (cards: Card[]) => void;\n}\n\nexport interface WebSocketAuthenticationApi {\n  sendAuthenticate: (token: string) => void;\n}\n\nfunction sendStartGame(subject: WebSocketSubject<Message>): void {\n  return subject.next({ name: MessageName.START_GAME });\n}\n\nfunction sendPlayCards(subject: WebSocketSubject<Message>, cards: Card[]): void {\n  return subject.next({ name: MessageName.PLAY_CARDS, data: cards });\n}\n\nfunction sendAuthenticate(subject: WebSocketSubject<Message>, token: string): void {\n  return subject.next({ name: MessageName.AUTHENTICATE, data: token });\n}\n\nexport function dispatchWebSocketMessageAsActions(message: Message, dispatch: Dispatch<Action>) {\n  // eslint-disable-next-line default-case\n  switch (message.name) {\n    case MessageName.BROADCAST_LOBBY_PLAYERS:\n      return dispatch(setLobbyPlayers(message.data));\n    case MessageName.BROADCAST_START_GAME:\n      dispatch(startGame(message.data.players));\n      return dispatch(setIsInGame(true));\n    case MessageName.BROADCAST_END_GAME:\n      if (message.data.isValid) {\n        return dispatch(endGameSuccess(message.data.winner));\n      }\n      return dispatch(endGameError(message.data.errorMessage));\n    case MessageName.BROADCAST_START_ROUND:\n      return dispatch(startRound(message.data.players));\n    case MessageName.BROADCAST_END_ROUND:\n      dispatch(addOutPlayers(message.data.outPlayers));\n      return dispatch(endRound(message.data.winner, message.data.penalties));\n    case MessageName.BROADCAST_START_CYCLE:\n      return dispatch(startCycle(message.data.orderedPlayers, message.data.isLastOfRound));\n    case MessageName.BROADCAST_END_CYCLE:\n      dispatch(addOutPlayers(message.data.outPlayers));\n      return dispatch(endCycle(message.data.highestTurnPlayers));\n    case MessageName.BROADCAST_PLAYER_TURN:\n      return dispatch(addPlayerTurn(message.data));\n    case MessageName.AVAILABLE_CARDS_IN_HAND:\n      return dispatch(setAvailableCardsInHand(message.data));\n    case MessageName.REQUEST_CARDS:\n      return dispatch(requestCards(message.data.timeoutInMillis, message.data.retriesLeft));\n    case MessageName.BROADCAST_START_PLAYER_TURN:\n      return dispatch(startPlayerTurn(message.data));\n    case MessageName.BROADCAST_OUT_PLAYER_AFTER_TURN:\n      return dispatch(addOutPlayers([message.data]));\n  }\n}\n\nexport function createGameApi(subject: WebSocketSubject<Message>): WebSocketGameApi {\n  return {\n    sendStartGame: sendStartGame.bind(null, subject),\n    sendPlayCards: sendPlayCards.bind(null, subject),\n  };\n}\n\nexport function createAuthenticationApi(subject: WebSocketSubject<Message>): WebSocketAuthenticationApi {\n  return {\n    sendAuthenticate: sendAuthenticate.bind(null, subject),\n  };\n}\n","import React from 'react';\nimport { PlayerId } from 'agurk-shared';\nimport {\n  List, ListItem, ListItemText, Typography,\n} from '@material-ui/core';\n\ninterface Props {\n  playerIds: PlayerId[];\n}\n\nexport default function PlayerIdList({ playerIds }: Props) {\n  const playerItems = playerIds.map((playerId) => (\n    <ListItem key={playerId}>\n      <ListItemText>{playerId}</ListItemText>\n    </ListItem>\n  ));\n\n  return (\n    <div>\n      <Typography variant=\"h2\" gutterBottom>Players</Typography>\n\n      <List>\n        { playerItems }\n      </List>\n    </div>\n  );\n}\n","import React from 'react';\nimport { PlayerId } from 'agurk-shared';\nimport { connect } from 'react-redux';\nimport { Button } from '@material-ui/core';\nimport PlayerIdList from './board/PlayerIdList';\nimport { State } from '../redux/root.reducer';\n\ninterface Props {\n  playerIds: PlayerId[];\n  startGame: () => void;\n}\n\nfunction Lobby({ playerIds, startGame }: Props) {\n  return (\n    <div>\n      <PlayerIdList playerIds={playerIds} />\n      <Button size=\"large\" fullWidth variant=\"contained\" color=\"secondary\" onClick={startGame}>\n        Start Game\n      </Button>\n    </div>\n  );\n}\n\nconst mapStateToProps = (state: State) => ({\n  playerIds: state.lobby.players,\n});\n\nexport default connect(mapStateToProps)(Lobby);\n","import React from 'react';\nimport {\n  Card as CardData, JOKER_CARD_KIND, JokerCard as JokerCardData, SuitCard as SuitCardData,\n} from 'agurk-shared';\nimport styled from 'styled-components';\nimport { Paper } from '@material-ui/core';\nimport { Theme } from '../../theme';\n\ninterface PlayingCardProps {\n  card: CardData;\n  isSelected?: boolean;\n  size?: 'small' | 'normal';\n}\n\ninterface JokerCardProps {\n  card: JokerCardData;\n}\n\ninterface SuitCardProps {\n  card: SuitCardData;\n}\n\ninterface StyledCardProps {\n  selected?: boolean;\n  size: 'small' | 'normal';\n  theme: Theme;\n}\n\nconst Card = styled(Paper)`\n  border-color: ${({ selected, theme }: StyledCardProps) => (\n    selected ? `${theme.palette.primary.main}` : 'transparent'\n  )};\n  border-width: 2px;\n  border-style: solid;\n  border-radius: 6%;\n  margin: auto;\n  width: ${({ size }: StyledCardProps) => (size === 'small' ? '4.5rem' : '5.5rem')};\n\n  @media(min-width: ${({ theme }: { theme: Theme }) => (theme.breakpoints.values.sm)}px) {\n    width: ${({ size }: StyledCardProps) => (size === 'small' ? '5rem' : '6rem')};\n  }\n\n  @media(min-width: ${({ theme }: { theme: Theme }) => (theme.breakpoints.values.md)}px) {\n    width: ${({ size }: StyledCardProps) => (size === 'small' ? '5.5rem' : '6.5rem')};\n  }\n`;\n\nconst Image = styled.img`\n  width: 100%;\n`;\n\nexport function generateCardKey(card: CardData): string {\n  if (card.kind === JOKER_CARD_KIND) {\n    return card.color + card.rank;\n  }\n  return card.suit + card.rank;\n}\n\nfunction JokerCard({ card }: JokerCardProps) {\n  const lowercaseColor = card.color.toLowerCase();\n  const cardSrcFile = '/agurk-client/images/joker.svg';\n  return <Image src={cardSrcFile} alt={`joker of rank ${card.rank} and color ${lowercaseColor}`} />;\n}\n\nfunction SuitCard({ card }: SuitCardProps) {\n  const lowercaseSuit = card.suit.toLowerCase();\n  const cardSrcFile = `/agurk-client/images/${card.rank}-${lowercaseSuit}.svg`;\n  return <Image src={cardSrcFile} alt={`card of rank ${card.rank} and suit ${lowercaseSuit}`} />;\n}\n\nexport function PlayingCardPlaceholder({ size = 'normal' }: Pick<PlayingCardProps, 'size'>) {\n  const cardSrcFile = '/agurk-client/images/placeholder.svg';\n  return (\n    <Card elevation={6} size={size}>\n      <Image src={cardSrcFile} alt=\"card placeholder\" />\n    </Card>\n  );\n}\n\nexport default function PlayingCard({ card, isSelected = false, size = 'normal' }: PlayingCardProps) {\n  return (\n    <Card elevation={6} selected={isSelected} size={size}>\n      { card.kind === JOKER_CARD_KIND\n        ? <JokerCard card={card} />\n        : <SuitCard card={card} /> }\n    </Card>\n  );\n}\n","import React from 'react';\nimport { Card as CardData } from 'agurk-shared';\nimport styled from 'styled-components';\nimport { Box, ButtonBase } from '@material-ui/core';\nimport PlayingCard, { generateCardKey } from './PlayingCard';\nimport { Theme } from '../../theme';\n\nexport type SelectableCard = CardData & { isSelected: boolean };\n\ninterface Props {\n  cards: SelectableCard[];\n  handleSelect: (card: CardData) => void;\n}\n\nconst Flex = styled(Box)`\n  display: flex;\n  flex-wrap: wrap;\n  width: calc(100% - 3.25rem);\n\n @media(min-width: ${({ theme }: { theme: Theme }) => (theme.breakpoints.values.sm)}px) {\n    width: calc(100% - 2.5rem);\n  }\n`;\n\nconst OverlappingBox = styled(Box)`\n  margin-right: -3.25rem;\n\n  @media(min-width: ${({ theme }: { theme: Theme }) => (theme.breakpoints.values.sm)}px) {\n    margin-right: -2.5rem;\n  }\n`;\n\nfunction byRankAsc(first: CardData, second: CardData) {\n  return Math.sign(first.rank - second.rank);\n}\n\nexport default function CardList({ cards, handleSelect }: Props) {\n  const sortedCards = [...cards].sort(byRankAsc);\n  const cardItems = sortedCards.map((card) => (\n    <OverlappingBox key={generateCardKey(card)} marginBottom={1}>\n      <ButtonBase onClick={() => handleSelect(card)}>\n        <PlayingCard card={card} isSelected={card.isSelected} />\n      </ButtonBase>\n    </OverlappingBox>\n  ));\n\n  return (\n    <Flex marginBottom={1}>\n      { cardItems }\n    </Flex>\n  );\n}\n","import React, { useEffect, useState } from 'react';\nimport { Card, cardEquals } from 'agurk-shared';\nimport { Box, Button, Typography } from '@material-ui/core';\nimport SelectableCardList, { SelectableCard } from './SelectableCardList';\n\ninterface Props {\n  playCards: (cards: Card[]) => void;\n  cardsInHand: Card[];\n  isServerRequestingCards: boolean;\n}\n\ninterface PlayTurnProps {\n  handlePlayClick: () => void;\n}\n\nfunction PlayTurn({ handlePlayClick }: PlayTurnProps) {\n  return (\n    <Button size=\"large\" fullWidth variant=\"contained\" color=\"secondary\" onClick={handlePlayClick}>\n      Play cards\n    </Button>\n  );\n}\n\nexport default function Hand({ playCards, cardsInHand, isServerRequestingCards }: Props) {\n  const [selectableCards, setSelectableCards] = useState<SelectableCard[]>([]);\n\n  useEffect(() => {\n    const cards = cardsInHand.map((card) => ({ ...card, isSelected: false }));\n    setSelectableCards(cards);\n  }, [cardsInHand]);\n\n  function playSelectedCards() {\n    const selectedCards = selectableCards.filter((card) => card.isSelected);\n    playCards(selectedCards);\n  }\n\n  function handleCardSelect(clicked: Card) {\n    setSelectableCards(selectableCards.map((card) => (cardEquals(card, clicked)\n      ? { ...card, isSelected: !card.isSelected }\n      : card)));\n  }\n\n  return (\n    <div>\n      <Typography variant=\"h2\" gutterBottom>Your hand</Typography>\n\n      <Box marginBottom={2}>\n        <SelectableCardList cards={selectableCards} handleSelect={handleCardSelect} />\n      </Box>\n\n      { isServerRequestingCards && <PlayTurn handlePlayClick={playSelectedCards} /> }\n    </div>\n  );\n}\n","import styled from 'styled-components';\nimport { Severity, Theme } from '../theme';\n\nexport default styled.span`\n  background-color: ${({ theme, severity }: { theme: Theme, severity: Severity }) => (theme.palette[severity].main)};\n  border-radius: 0.25rem;\n  font-size: ${({ theme }: { theme: Theme }) => (theme.typography.caption.fontSize)};\n  padding: 0.15rem 0.25rem;\n  font-weight: bold;\n  text-transform: uppercase;\n  color: white;\n  display: inline-block;\n`;\n","import React from 'react';\nimport styled, { keyframes } from 'styled-components';\nimport Badge from '../Badge';\nimport { PlayerState } from '../../redux/gamePlayers.reducer';\n\ninterface Props {\n  player: PlayerState;\n}\n\nconst opacityPulse = keyframes`\n  0% {\n    opacity: 0.6;\n  }\n\n  50% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0.6;\n  }\n`;\n\nconst PlayerName = styled.span`\n  text-decoration-line: ${(props: { isOut: boolean }) => (props.isOut ? 'line-through' : 'none')};\n`;\n\nconst ActivePlayerName = styled(PlayerName)`\n  animation: ${opacityPulse} 2s infinite;\n  font-weight: bold;\n`;\n\nconst InactivePlayerName = styled(PlayerName)`\n  font-weight: normal;\n`;\n\nexport default function Player({ player }: Props) {\n  const penaltySum = player.penalties.reduce((accumulator, current) => current.card.rank + accumulator, 0);\n\n  return (\n    <>\n      { player.isServerRequestingCards\n        ? <ActivePlayerName isOut={player.isOut}>{ player.id }</ActivePlayerName>\n        : <InactivePlayerName isOut={player.isOut}>{ player.id }</InactivePlayerName>}\n      <Badge severity=\"warning\">\n        Penalty\n        {' '}\n        {penaltySum}\n      </Badge>\n    </>\n  );\n}\n","import React from 'react';\nimport {\n  List, ListItem, ListItemText, Step, StepLabel, Stepper, Typography,\n} from '@material-ui/core';\nimport Player from './Player';\nimport { PlayerState } from '../../redux/gamePlayers.reducer';\n\ninterface Props {\n  players: PlayerState[];\n}\n\nfunction byOrderAsc(first: PlayerState, second: PlayerState) {\n  return Math.sign(first.order - second.order);\n}\n\nfunction ActiveOrderedPlayers({ players }: Props) {\n  const activePlayers = players.filter((player) => !player.isOut);\n  const orderedActivePlayers = [...activePlayers].sort(byOrderAsc);\n  const currentActivePlayerIndex = orderedActivePlayers.findIndex((player) => player.isServerRequestingCards);\n  const activePlayerItems = orderedActivePlayers.map((player) => {\n    const isCompleted = currentActivePlayerIndex > player.order;\n    return (\n      <Step\n        active={player.isServerRequestingCards}\n        completed={isCompleted}\n        key={player.id}\n      >\n        <StepLabel>\n          <Player player={player} />\n        </StepLabel>\n      </Step>\n    );\n  });\n\n  return activePlayerItems.length\n    ? <Stepper orientation=\"vertical\">{ activePlayerItems }</Stepper>\n    : null;\n}\n\nfunction OutPlayers({ players }: Props) {\n  const outPlayers = players.filter((player) => player.isOut);\n  const outPlayerItems = outPlayers.map((player) => (\n    <ListItem key={player.id}>\n      <ListItemText secondary={player.outReason}>\n        <Player player={player} />\n      </ListItemText>\n    </ListItem>\n  ));\n\n  return outPlayerItems.length\n    ? <List>{ outPlayerItems }</List>\n    : null;\n}\n\nexport default function PlayerStateList({ players }: Props) {\n  return (\n    <div>\n      <Typography variant=\"h2\" gutterBottom>Players</Typography>\n\n      <ActiveOrderedPlayers players={players} />\n      <OutPlayers players={players} />\n    </div>\n  );\n}\n","import { Card, ValidatedTurn } from 'agurk-shared';\nimport {\n  ADD_OUT_PLAYERS,\n  ADD_PLAYER_TURN,\n  END_CYCLE,\n  END_GAME_ERROR,\n  END_GAME_SUCCESS,\n  END_ROUND,\n  GameAction,\n  REQUEST_CARDS,\n  RESET_GAME,\n  SET_CARDS_IN_HAND,\n  START_CYCLE,\n  START_GAME,\n  START_ROUND,\n} from './game.action';\n\nexport enum GameStage {\n  START = 'START',\n  END = 'END',\n  BETWEEN_ROUNDS = 'BETWEEN_ROUNDS',\n  BETWEEN_CYCLES = 'BETWEEN_CYCLES',\n  BEFORE_CYCLE = 'BEFORE_CYCLE',\n  IN_CYCLE = 'IN_CYCLE',\n}\n\nexport interface State {\n  stage: GameStage;\n  validatedTurns: ValidatedTurn[];\n  cardsInHand: Card[];\n  isLastCycleOfRound: boolean;\n  turnTimeoutInMillis: number | undefined;\n  turnRetriesLeft: number;\n}\n\nconst INITIAL_STATE: State = {\n  stage: GameStage.START,\n  validatedTurns: [],\n  cardsInHand: [],\n  isLastCycleOfRound: false,\n  turnTimeoutInMillis: undefined,\n  turnRetriesLeft: 0,\n};\n\nexport default function (state = INITIAL_STATE, action: GameAction): State {\n  switch (action.type) {\n    case ADD_OUT_PLAYERS:\n      return state;\n    case START_GAME:\n      return { ...state, stage: GameStage.START };\n    case END_GAME_SUCCESS:\n      return { ...state, stage: GameStage.END };\n    case RESET_GAME:\n      return INITIAL_STATE;\n    case END_GAME_ERROR:\n      return { ...state, stage: GameStage.END };\n    case SET_CARDS_IN_HAND:\n      return {\n        ...state,\n        cardsInHand: action.cards,\n      };\n    case ADD_PLAYER_TURN:\n      return {\n        ...state,\n        validatedTurns: [\n          ...state.validatedTurns,\n          action.turn,\n        ],\n      };\n    case START_ROUND:\n      return { ...state, stage: GameStage.BEFORE_CYCLE };\n    case END_ROUND:\n      return { ...state, stage: GameStage.BETWEEN_ROUNDS };\n    case START_CYCLE:\n      return {\n        ...state,\n        stage: GameStage.IN_CYCLE,\n        validatedTurns: [],\n        isLastCycleOfRound: action.isLastOfRound,\n      };\n    case END_CYCLE:\n      return {\n        ...state,\n        stage: state.isLastCycleOfRound ? GameStage.BETWEEN_ROUNDS : GameStage.BETWEEN_CYCLES,\n      };\n    case REQUEST_CARDS:\n      return {\n        ...state,\n        turnTimeoutInMillis: action.turnTimeoutInMillis,\n        turnRetriesLeft: action.turnRetriesLeft,\n      };\n    default:\n      return state;\n  }\n}\n","import React, { useEffect, useState } from 'react';\n\ninterface Props {\n  timeoutInSeconds: number;\n}\n\nexport default function TextSecondTimer({ timeoutInSeconds }: Props) {\n  const [timeLeftInSeconds, setTimeLeftInSeconds] = useState<number>(timeoutInSeconds);\n\n  useEffect(() => {\n    setTimeLeftInSeconds(timeoutInSeconds);\n  }, [timeoutInSeconds]);\n\n  useEffect(() => {\n    const interval: number = setInterval(() => {\n      const newTimeLeftInMillis = timeLeftInSeconds - 1;\n      return newTimeLeftInMillis < 0\n        ? clearInterval(interval)\n        : setTimeLeftInSeconds((prevState) => prevState - 1);\n    }, 1000);\n    return () => clearInterval(interval);\n  });\n\n  return (<>{ timeLeftInSeconds }</>);\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport { Grid, Typography } from '@material-ui/core';\nimport TextSecondTimer from '../TextSecondTimer';\nimport { GameStage } from '../../redux/gameState.reducer';\nimport { PlayerState } from '../../redux/gamePlayers.reducer';\n\ninterface Props {\n  isServerRequestingCards: boolean;\n  players: Pick<PlayerState, 'id' |\n    'isServerRequestingCards' |\n    'isRoundWinner' |\n    'isGameWinner' |\n    'isCycleHighestTurnPlayer'\n    >[];\n  turnRetriesLeft: number;\n  turnTimeoutInSeconds: number | undefined;\n  gameStage: GameStage;\n}\n\nconst BoldTypography = styled(Typography)`\n  font-weight: bold;\n`;\n\nfunction YourTurn({ turnTimeoutInSeconds, turnRetriesLeft }: Pick<Props, 'turnTimeoutInSeconds' | 'turnRetriesLeft'>) {\n  return (\n    <Grid container justify=\"space-between\" alignItems=\"baseline\">\n      <Typography variant=\"h2\">\n        Your turn\n        { ' ' }\n      </Typography>\n      { turnTimeoutInSeconds && (\n        <BoldTypography variant=\"subtitle1\">\n          <TextSecondTimer timeoutInSeconds={turnTimeoutInSeconds} />\n          { ' ' }\n          seconds and\n          { ' ' }\n          { turnRetriesLeft }\n          { ' ' }\n          { turnRetriesLeft === 1\n            ? 'retry left'\n            : 'retries left' }\n        </BoldTypography>\n      ) }\n    </Grid>\n  );\n}\n\nfunction TheirTurn({ players }: Pick<Props, 'players'>) {\n  const currentTurnPlayer = players.find((player) => player.isServerRequestingCards);\n  return (\n    <Typography variant=\"h2\">\n      { currentTurnPlayer?.id }\n      { '\\'s turn' }\n    </Typography>\n  );\n}\n\nfunction TurnIndicator({\n  isServerRequestingCards, players, turnTimeoutInSeconds, turnRetriesLeft,\n}: Pick<Props, 'turnTimeoutInSeconds' | 'turnRetriesLeft' | 'players' | 'isServerRequestingCards'>) {\n  return (isServerRequestingCards\n    ? <YourTurn turnTimeoutInSeconds={turnTimeoutInSeconds} turnRetriesLeft={turnRetriesLeft} />\n    : <TheirTurn players={players} />\n  );\n}\n\nfunction HighestCyclePlayers({ players }: Pick<Props, 'players'>) {\n  const highestCyclePlayerIds = players\n    .filter((player) => player.isCycleHighestTurnPlayer)\n    .map((player) => player.id);\n\n  if (highestCyclePlayerIds.length === 0) {\n    return <Typography variant=\"h2\">No cycle winner</Typography>;\n  }\n\n  return (\n    <Typography variant=\"h2\">\n      { highestCyclePlayerIds.join(' and ') }\n      { ' ' }\n      { highestCyclePlayerIds.length === 1\n        ? 'wins the cycle'\n        : 'win the cycle' }\n    </Typography>\n  );\n}\n\nfunction RoundWinner({ players }: Pick<Props, 'players'>) {\n  const roundWinner = players.find((player) => player.isRoundWinner);\n  return (\n    <Typography variant=\"h2\">\n      { roundWinner\n        ? `${roundWinner.id} wins the round`\n        : 'No round winner' }\n    </Typography>\n  );\n}\n\nfunction GameWinner({ players }: Pick<Props, 'players'>) {\n  const gameWinner = players.find((player) => player.isGameWinner);\n  return (\n    <Typography variant=\"h2\">\n      { gameWinner\n        ? `${gameWinner.id} wins the game 🎉🎉`\n        : 'No game winner' }\n    </Typography>\n  );\n}\n\nexport default function Overview({\n  isServerRequestingCards, players, turnTimeoutInSeconds, turnRetriesLeft, gameStage,\n}: Props) {\n  switch (gameStage) {\n    case GameStage.IN_CYCLE:\n      return (\n        <TurnIndicator\n          isServerRequestingCards={isServerRequestingCards}\n          players={players}\n          turnRetriesLeft={turnRetriesLeft}\n          turnTimeoutInSeconds={turnTimeoutInSeconds}\n        />\n      );\n    case GameStage.BETWEEN_CYCLES:\n      return (\n        <HighestCyclePlayers players={players} />\n      );\n    case GameStage.BETWEEN_ROUNDS:\n      return (\n        <RoundWinner players={players} />\n      );\n    case GameStage.END:\n      return (\n        <GameWinner players={players} />\n      );\n    default:\n      return null;\n  }\n}\n","import React from 'react';\nimport { InvalidTurn, ValidatedTurn, ValidTurn } from 'agurk-shared';\nimport {\n  Box, Grid, Tooltip, Typography,\n} from '@material-ui/core';\nimport styled from 'styled-components';\nimport PlayingCard, { generateCardKey, PlayingCardPlaceholder } from './PlayingCard';\nimport Badge from '../Badge';\n\ninterface Props {\n  turn: ValidatedTurn;\n}\n\nconst PlayerIdMaxWidthBox = styled.div`\n  max-width: ${({ cardCount }: {cardCount: number }) => (`${cardCount * 6}rem`)};\n`;\n\nexport function generateTurnKey(turn: ValidatedTurn): string {\n  return turn.playerId + turn.valid;\n}\n\nfunction createCardItems(turn: ValidatedTurn) {\n  return turn.cards.map((card) => (\n    <Grid item key={generateCardKey(card)}>\n      <PlayingCard size=\"small\" card={card} />\n    </Grid>\n  ));\n}\n\nfunction Valid({ turn }: { turn: ValidTurn }) {\n  const cardItems = createCardItems(turn);\n\n  return (\n    <>\n      <Box marginBottom={1}>\n        <Grid container spacing={1}>\n          { cardItems }\n        </Grid>\n      </Box>\n      <PlayerIdMaxWidthBox cardCount={cardItems.length}>\n        <Tooltip title={turn.playerId}>\n          <Typography variant=\"body1\" align=\"center\" noWrap>\n            {turn.playerId}\n          </Typography>\n        </Tooltip>\n      </PlayerIdMaxWidthBox>\n    </>\n  );\n}\n\nfunction Invalid({ turn }: { turn: InvalidTurn }) {\n  const cardItems = createCardItems(turn);\n\n  return (\n    <>\n      <Box marginBottom={1}>\n        <Grid container spacing={1}>\n          { cardItems.length === 0\n            ? <PlayingCardPlaceholder size=\"small\" />\n            : cardItems }\n        </Grid>\n      </Box>\n      <Typography variant=\"body1\" align=\"center\">\n        {turn.playerId}\n      </Typography>\n      <Typography variant=\"body1\" align=\"center\">\n        <Badge severity=\"error\">\n          {turn.invalidReason}\n        </Badge>\n      </Typography>\n    </>\n  );\n}\n\nexport default function Turn({ turn }: Props) {\n  return (\n    <Box>\n      {turn.valid\n        ? <Valid turn={turn} />\n        : <Invalid turn={turn} />}\n    </Box>\n  );\n}\n","import React from 'react';\nimport { ValidatedTurn } from 'agurk-shared';\nimport { Grid } from '@material-ui/core';\nimport Turn, { generateTurnKey } from './Turn';\n\ninterface Props {\n  turns: ValidatedTurn[];\n}\n\nexport default function TurnList({ turns }: Props) {\n  const mostRecentPlayerTurns = turns.reduceRight<ValidatedTurn[]>((acc, current) => {\n    const isMostRecentPlayerTurn = acc.find((turn) => turn.playerId === current.playerId) === undefined;\n    return isMostRecentPlayerTurn\n      ? [current, ...acc]\n      : acc;\n  }, []);\n  const turnItems = mostRecentPlayerTurns.map((turn) => (\n    <Grid item key={generateTurnKey(turn)}>\n      <Turn turn={turn} />\n    </Grid>\n  ));\n\n  return (\n    <Grid container spacing={2}>\n      { turnItems }\n    </Grid>\n  );\n}\n","import React from 'react';\nimport {\n  Card, compareRanks, ValidatedTurn, ValidTurn,\n} from 'agurk-shared';\nimport styled from 'styled-components';\nimport { Box } from '@material-ui/core';\nimport PlayingCard, { PlayingCardPlaceholder } from './PlayingCard';\nimport Badge from '../Badge';\n\ninterface Props {\n  playedTurns: ValidatedTurn[];\n}\n\nconst Centered = styled.div`\n  text-align: center;\n`;\n\nfunction toMaxRankedCard(maxRankCard: Card, currentCard: Card) {\n  return compareRanks(maxRankCard, currentCard) > 0 ? maxRankCard : currentCard;\n}\n\nexport default function LastPlayedMaxCard({ playedTurns }: Props) {\n  const validTurns = playedTurns.filter((turn) => turn.valid) as ValidTurn[];\n  const playedCards = validTurns.flatMap((turn) => turn.cards);\n  const highestPlayedCard = playedCards.length > 0\n    ? <PlayingCard size=\"small\" card={playedCards.reduce(toMaxRankedCard)} />\n    : <PlayingCardPlaceholder size=\"small\" />;\n\n  return (\n    <Box>\n      <Box marginBottom={1}>\n        { highestPlayedCard }\n      </Box>\n      <Centered>\n        <Badge severity=\"info\">Highest card</Badge>\n      </Centered>\n    </Box>\n  );\n}\n","import React, { useEffect, useState } from 'react';\n\nexport default function (timeoutInMillis: number) {\n  return <P extends {}>(Component: React.ComponentType<P>) => (props: P) => {\n    const [isHidden, setIsHidden] = useState<boolean>(false);\n\n    useEffect(() => {\n      setIsHidden(false);\n      const timeoutId: number = setTimeout(() => setIsHidden(true), timeoutInMillis);\n      return () => clearTimeout(timeoutId);\n    }, [props]);\n\n    return isHidden\n      ? null\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      : <Component {...props} />;\n  };\n}\n","import React from 'react';\nimport { ValidatedTurn } from 'agurk-shared';\nimport { Grid } from '@material-ui/core';\nimport Turn from './Turn';\nimport LastPlayedMaxCard from './LastPlayedMaxCard';\nimport hideAfterTimeout from '../hideAfterTimeout';\n\ninterface Props {\n  playedTurns: ValidatedTurn[];\n}\n\nconst InvalidTurnHiddenAfterTimeout = hideAfterTimeout(2000)(Turn);\n\nfunction MostRecentTurn({ playedTurns }: Props) {\n  const mostRecentTurn: ValidatedTurn | undefined = playedTurns[playedTurns.length - 1];\n\n  if (!mostRecentTurn) {\n    return null;\n  }\n\n  return mostRecentTurn.valid\n    ? <Turn turn={mostRecentTurn} />\n    : <InvalidTurnHiddenAfterTimeout turn={mostRecentTurn} />;\n}\n\nexport default function TurnStack({ playedTurns }: Props) {\n  return (\n    <Grid container spacing={4}>\n      <Grid item>\n        <LastPlayedMaxCard playedTurns={playedTurns} />\n      </Grid>\n      <Grid item>\n        <MostRecentTurn playedTurns={playedTurns} />\n      </Grid>\n    </Grid>\n  );\n}\n","import React from 'react';\nimport { ValidatedTurn } from 'agurk-shared';\nimport TurnList from './TurnList';\nimport TurnStack from './TurnStack';\n\ninterface Props {\n  playedTurns: ValidatedTurn[];\n  isLastCycleOfRound: boolean;\n}\n\nexport default function PlayedTurns({ playedTurns, isLastCycleOfRound }: Props) {\n  return isLastCycleOfRound\n    ? <TurnList turns={playedTurns} />\n    : <TurnStack playedTurns={playedTurns} />;\n}\n","import React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Card, PlayerId, ValidatedTurn } from 'agurk-shared';\nimport styled from 'styled-components';\nimport { Action, Dispatch } from 'redux';\nimport { Box, Button, CircularProgress } from '@material-ui/core';\nimport Hand from './Hand';\nimport PlayerStateList from './PlayerStateList';\nimport { State } from '../../redux/root.reducer';\nimport { WebSocketGameApi } from '../../communication/webSocketServerApi';\nimport { resetGame } from '../../redux/game.action';\nimport Overview from './Overview';\nimport { setIsInGame } from '../../redux/lobby.action';\nimport PlayedTurns from './PlayedTurns';\nimport { Theme } from '../../theme';\nimport { GameStage } from '../../redux/gameState.reducer';\nimport { PlayerState } from '../../redux/gamePlayers.reducer';\n\ninterface Props {\n  playerId: PlayerId;\n  state: {\n    players: PlayerState[]\n    playedTurns: ValidatedTurn[];\n    cardsInHand: Card[];\n    playerState: PlayerState | undefined;\n    stage: GameStage;\n    isLastCycleOfRound: boolean;\n    turnTimeoutInSeconds: number | undefined;\n    turnRetriesLeft: number;\n  };\n  playCards: (cards: Card[]) => void;\n  closeGame: () => void;\n}\n\nconst CenteredFlex = styled.div`\n  display: flex;\n  justify-content: center;\n`;\n\nconst Grid = styled.div`\n  display: grid;\n  row-gap: ${({ theme }: { theme: Theme }) => (theme.spacing(2))}px;\n  margin-bottom: ${({ theme }: { theme: Theme }) => (theme.spacing(2))}px;\n\n  @media(min-width: ${({ theme }: { theme: Theme }) => (theme.breakpoints.values.md)}px) {\n    grid-template-columns: 30% 65%;\n    grid-template-rows: auto auto auto;\n    column-gap: 5%;\n    row-gap: 2em;\n  }\n`;\n\nconst OverviewBox = styled(Box)`\n  grid-column-start: 1;\n  grid-column-end: span 1;\n  grid-row-start: 1;\n  grid-row-end: span 1;\n\n  @media(min-width: ${({ theme }: { theme: Theme }) => (theme.breakpoints.values.md)}px) {\n    grid-column-start: 2;\n    grid-column-end: span 1;\n    grid-row-start: 1;\n    grid-row-end: span 1;\n  }\n`;\n\nconst PlayedTurnsBox = styled(Box)`\n  grid-column-start: 1;\n  grid-column-end: span 1;\n  grid-row-start: 2;\n  grid-row-end: span 1;\n  min-height: 25vh;\n\n  @media(min-width: ${({ theme }: { theme: Theme }) => (theme.breakpoints.values.md)}px) {\n    grid-column-start: 2;\n    grid-column-end: span 1;\n    grid-row-start: 2;\n    grid-row-end: span 1;\n  }\n`;\n\nconst HandBox = styled(Box)`\n  grid-column-start: 1;\n  grid-column-end: span 1;\n  grid-row-start: 3;\n  grid-row-end: span 1;\n\n  @media(min-width: ${({ theme }: { theme: Theme }) => (theme.breakpoints.values.md)}px) {\n    grid-column-start: 2;\n    grid-column-end: span 1;\n    grid-row-start: 3;\n    grid-row-end: span 1;\n  }\n`;\n\nconst PlayersBox = styled(Box)`\n  grid-column-start: 1;\n  grid-column-end: span 1;\n  grid-row-start: 4;\n  grid-row-end: span 1;\n\n  @media(min-width: ${({ theme }: { theme: Theme }) => (theme.breakpoints.values.md)}px) {\n    grid-column-start: 1;\n    grid-column-end: span 1;\n    grid-row-start: 1;\n    grid-row-end: span 2;\n  }\n`;\n\nconst NavigationBox = styled(Box)`\n  grid-column-start: 1;\n  grid-column-end: span 1;\n  grid-row-start: 6;\n  grid-row-end: span 1;\n\n  @media(min-width: ${({ theme }: { theme: Theme }) => (theme.breakpoints.values.md)}px) {\n    grid-column-start: 1;\n    grid-column-end: span 1;\n    grid-row-start: 3;\n    grid-row-end: span 1;\n  }\n`;\n\nfunction Board({ state, playCards, closeGame }: Props) {\n  useEffect(() => closeGame, [closeGame]);\n\n  if (!state.playerState) {\n    return <CenteredFlex><CircularProgress /></CenteredFlex>;\n  }\n\n  return (\n    <Grid>\n      <OverviewBox>\n        <Overview\n          gameStage={state.stage}\n          isServerRequestingCards={state.playerState.isServerRequestingCards}\n          players={state.players}\n          turnTimeoutInSeconds={state.turnTimeoutInSeconds}\n          turnRetriesLeft={state.turnRetriesLeft}\n        />\n      </OverviewBox>\n      <PlayedTurnsBox>\n        <PlayedTurns playedTurns={state.playedTurns} isLastCycleOfRound={state.isLastCycleOfRound} />\n      </PlayedTurnsBox>\n      <HandBox>\n        <Hand\n          isServerRequestingCards={state.playerState.isServerRequestingCards}\n          cardsInHand={state.cardsInHand}\n          playCards={playCards}\n        />\n      </HandBox>\n      <PlayersBox>\n        <PlayerStateList players={state.players} />\n      </PlayersBox>\n      { state.stage === GameStage.END\n        && (\n        <NavigationBox>\n          <Button fullWidth variant=\"contained\" color=\"secondary\" onClick={closeGame}>\n            Return to lobby\n          </Button>\n        </NavigationBox>\n        )}\n    </Grid>\n  );\n}\n\nconst mapStateToProps = (state: State, ownProps: { serverApi: WebSocketGameApi, playerId: PlayerId }) => ({\n  state: {\n    cardsInHand: state.game.state.cardsInHand,\n    players: state.game.players,\n    stage: state.game.state.stage,\n    playedTurns: state.game.state.validatedTurns,\n    playerState: state.game.players.find((player) => player.id === ownProps.playerId),\n    playCards: (cards: Card[]) => ownProps.serverApi.sendPlayCards(cards),\n    isLastCycleOfRound: state.game.state.isLastCycleOfRound,\n    turnTimeoutInSeconds: state.game.state.turnTimeoutInMillis\n      ? state.game.state.turnTimeoutInMillis / 1000\n      : undefined,\n    turnRetriesLeft: state.game.state.turnRetriesLeft,\n  },\n  playCards: (cards: Card[]) => ownProps.serverApi.sendPlayCards(cards),\n});\n\n\nconst mapDispatchToProps = (dispatch: Dispatch<Action>) => ({\n  closeGame: () => {\n    dispatch(resetGame());\n    dispatch(setIsInGame(false));\n  },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Board);\n","import React, { useEffect, useState } from 'react';\nimport { Message, MessageName } from 'agurk-shared';\nimport { connect } from 'react-redux';\nimport { filter } from 'rxjs/operators';\nimport { Action, Dispatch } from 'redux';\nimport { webSocket, WebSocketSubject } from 'rxjs/webSocket';\nimport {\n  createAuthenticationApi, createGameApi, dispatchWebSocketMessageAsActions,\n} from '../communication/webSocketServerApi';\nimport { State } from '../redux/root.reducer';\nimport { unauthenticateWithError } from '../redux/authentication.action';\nimport Lobby from './Lobby';\nimport Board from './board/Board';\n\nconst WSS_SERVER_URI = process.env.REACT_APP_WSS_SERVER_URI as string;\n\ninterface Props {\n  dispatch: Dispatch<Action>;\n  authenticatedSubject: string;\n  authenticationToken: string;\n  isInGame: boolean;\n}\n\nfunction respondToAuthenticationRequestFromServer(\n  subject: WebSocketSubject<Message>,\n  authenticationToken: string,\n  dispatch: Dispatch<Action>,\n) {\n  subject.pipe(filter((message) => message.name === MessageName.REQUEST_AUTHENTICATION))\n    .subscribe(() => {\n      const webSocketAuthenticationApi = createAuthenticationApi(subject);\n      webSocketAuthenticationApi.sendAuthenticate(authenticationToken);\n    },\n    () => dispatch(unauthenticateWithError('Could not authenticate with the game server. Try to login again...')));\n}\n\nfunction handleMessagesFromServer(subject: WebSocketSubject<Message>, dispatch: Dispatch<Action>) {\n  subject.subscribe((message) => dispatchWebSocketMessageAsActions(message, dispatch),\n    () => dispatch(unauthenticateWithError('Could not contact the game server. Try again later...')));\n}\n\nfunction Game({\n  dispatch, authenticationToken, isInGame, authenticatedSubject,\n}: Props) {\n  const webSocketSubject: WebSocketSubject<Message> = webSocket({\n    url: WSS_SERVER_URI,\n    closeObserver: {\n      next: (closeEvent: CloseEvent) => dispatch(unauthenticateWithError(closeEvent.reason)),\n    },\n  });\n  const [subject] = useState(webSocketSubject);\n  const gameApi = createGameApi(subject);\n\n  useEffect(() => {\n    handleMessagesFromServer(subject, dispatch);\n    return () => subject.complete();\n  }, [subject, dispatch]);\n\n  useEffect(() => {\n    respondToAuthenticationRequestFromServer(subject, authenticationToken, dispatch);\n    return () => subject.complete();\n  }, [subject, dispatch, authenticationToken]);\n\n  return (\n    <>\n      { isInGame\n        ? <Board playerId={authenticatedSubject} serverApi={gameApi} />\n        : <Lobby startGame={gameApi.sendStartGame} /> }\n    </>\n  );\n}\n\nconst mapStateToProps = (state: State) => ({\n  authenticatedSubject: state.authentication.subject,\n  isInGame: state.lobby.isInGame,\n  authenticationToken: state.authentication.token,\n});\n\nexport default connect(mapStateToProps)(Game);\n","import React from 'react';\nimport {\n  AppBar, Button, Toolbar, Typography,\n} from '@material-ui/core';\n\nexport default function Header() {\n  return (\n    <header>\n      <AppBar position=\"static\">\n        <Toolbar>\n          <Button color=\"inherit\" href=\"./\">\n            <Typography variant=\"h5\">\n              Agurk\n            </Typography>\n          </Button>\n          <Button\n            color=\"inherit\"\n            target=\"_blank\"\n            href=\"https://github.com/SimonMueller/agurk-server/blob/master/README.md#rules\"\n          >\n            <Typography variant=\"body1\">\n              Rules\n            </Typography>\n          </Button>\n        </Toolbar>\n      </AppBar>\n    </header>\n  );\n}\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { Container, Box } from '@material-ui/core';\nimport { State } from '../redux/root.reducer';\nimport Login from './Login';\nimport Game from './Game';\nimport Header from './Header';\n\ninterface Props {\n  isAuthenticated: boolean;\n}\n\nfunction App({ isAuthenticated }: Props) {\n  return (\n    <>\n      <Header />\n      <main>\n        <Container maxWidth=\"md\">\n          <Box paddingTop={2}>\n            { isAuthenticated ? <Game /> : <Login /> }\n          </Box>\n        </Container>\n      </main>\n    </>\n  );\n}\n\nconst mapStateToProps = (state: State) => ({\n  isAuthenticated: state.authentication.isAuthenticated,\n});\n\nexport default connect(mapStateToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { createMuiTheme, responsiveFontSizes, Theme as MuiTheme } from '@material-ui/core';\n\nexport type Severity = 'warning' | 'info' | 'error' | 'success';\n\nexport type Theme = MuiTheme;\n\nconst theme: Theme = createMuiTheme({\n  typography: {\n    h1: { fontSize: '3rem' },\n    h2: { fontSize: '2.25rem' },\n    h3: { fontSize: '1.75rem' },\n    h4: { fontSize: '1.5rem' },\n    h5: { fontSize: '1.25rem' },\n    h6: { fontSize: '1rem' },\n  },\n  palette: {\n    primary: {\n      light: '#48a999',\n      main: '#00695c',\n      dark: '#004c40',\n      contrastText: '#fff',\n    },\n    secondary: {\n      light: '#9162e4',\n      main: '#5e35b1',\n      dark: '#280680',\n      contrastText: '#fff',\n    },\n    error: {\n      light: '#ff5131',\n      main: '#d50000',\n      dark: '#9b0000',\n      contrastText: '#fff',\n    },\n    warning: {\n      light: '#ff7539',\n      main: '#ff3d00',\n      dark: '#c30000',\n      contrastText: '#000',\n    },\n    info: {\n      light: '#48a999',\n      main: '#00695c',\n      dark: '#004c40',\n      contrastText: '#fff',\n    },\n    success: {\n      light: '#5efc82',\n      main: '#00c853',\n      dark: '#009624',\n      contrastText: '#000',\n    },\n  },\n});\n\nexport default responsiveFontSizes(theme);\n","import {\n  AUTHENTICATE_WITH_TOKEN,\n  AUTHENTICATION_ERROR,\n  AuthenticationAction,\n  REQUEST_AUTHENTICATION,\n  UNAUTHENTICATE_WITH_ERROR,\n} from './authentication.action';\n\nexport interface State {\n  subject: string;\n  isAuthenticated: boolean;\n  isRequesting: boolean;\n  token: string;\n  error: string | undefined;\n}\n\nconst INITIAL_STATE: State = {\n  subject: '',\n  isAuthenticated: false,\n  isRequesting: false,\n  token: '',\n  error: undefined,\n};\n\nexport default function (state: State = INITIAL_STATE, action: AuthenticationAction): State {\n  switch (action.type) {\n    case AUTHENTICATE_WITH_TOKEN:\n      return {\n        ...state,\n        subject: action.subject,\n        isAuthenticated: true,\n        token: action.token,\n        isRequesting: false,\n        error: undefined,\n      };\n    case AUTHENTICATION_ERROR:\n      return {\n        ...state,\n        error: action.message,\n        isRequesting: false,\n      };\n    case UNAUTHENTICATE_WITH_ERROR:\n      return {\n        ...state,\n        ...INITIAL_STATE,\n        error: action.message,\n      };\n    case REQUEST_AUTHENTICATION:\n      return {\n        ...state,\n        isRequesting: true,\n      };\n    default:\n      return state;\n  }\n}\n","import { OutPlayer, Penalty, PlayerId } from 'agurk-shared';\nimport {\n  ADD_OUT_PLAYERS,\n  ADD_PLAYER_TURN,\n  END_CYCLE,\n  END_GAME_SUCCESS,\n  END_ROUND,\n  GameAction,\n  RESET_GAME,\n  START_CYCLE,\n  START_GAME,\n  START_PLAYER_TURN,\n} from './game.action';\n\nconst LOWEST_ORDER_PRECEDENCE = Number.MAX_SAFE_INTEGER;\n\nfunction filterPenaltiesForPlayerId(penalties: Penalty[], playerId: PlayerId) {\n  return penalties.filter((penalty) => penalty.playerId === playerId);\n}\n\nfunction isPlayerIdOneOfHighestTurnPlayers(highestTurnPlayerIds: PlayerId[], playerId: PlayerId) {\n  return highestTurnPlayerIds.some((highestTurnPlayerId) => highestTurnPlayerId === playerId);\n}\n\nfunction isPlayerWithIdOut(outPlayers: OutPlayer[], player: PlayerState) {\n  const foundOutPlayer = outPlayers.find((outPlayer) => outPlayer.id === player.id);\n  return foundOutPlayer\n    ? true\n    : player.isOut;\n}\n\nfunction findPlayerOutReason(outPlayers: OutPlayer[], player: PlayerState) {\n  const foundOutPlayer = outPlayers.find((outPlayer) => outPlayer.id === player.id);\n  return foundOutPlayer\n    ? foundOutPlayer.reason\n    : player.outReason;\n}\n\nfunction findPlayerOrder(orderedActivePlayerIds: PlayerId[], player: PlayerState) {\n  const foundIndex = orderedActivePlayerIds.findIndex((playerId) => playerId === player.id);\n  return foundIndex === -1\n    ? LOWEST_ORDER_PRECEDENCE\n    : foundIndex;\n}\n\nexport interface PlayerState {\n  id: PlayerId;\n  isGameWinner: boolean;\n  isCycleHighestTurnPlayer: boolean;\n  penalties: Penalty[];\n  isRoundWinner: boolean;\n  isOut: boolean;\n  outReason?: string;\n  isServerRequestingCards: boolean;\n  order: number;\n}\n\nexport type State = PlayerState[];\n\nconst INITIAL_STATE: State = [];\n\nconst INITIAL_PLAYER_STATE = {\n  isGameWinner: false,\n  isRoundWinner: false,\n  isCycleHighestTurnPlayer: false,\n  penalties: [],\n  isOut: false,\n  isServerRequestingCards: false,\n  order: LOWEST_ORDER_PRECEDENCE,\n};\n\nexport default function (state = INITIAL_STATE, action: GameAction): State {\n  switch (action.type) {\n    case ADD_OUT_PLAYERS:\n      return state.map((player) => ({\n        ...player,\n        isOut: isPlayerWithIdOut(action.outPlayers, player),\n        outReason: findPlayerOutReason(action.outPlayers, player),\n      }));\n    case START_GAME:\n      return action.playerIds.map((playerId) => ({\n        ...INITIAL_PLAYER_STATE,\n        id: playerId,\n      }));\n    case END_GAME_SUCCESS:\n      return state.map((player) => ({\n        ...player,\n        isGameWinner: player.id === action.winner,\n      }));\n    case RESET_GAME:\n      return INITIAL_STATE;\n    case ADD_PLAYER_TURN:\n      return state.map((player) => ({\n        ...player,\n        isServerRequestingCards: action.turn.playerId === player.id ? false : player.isServerRequestingCards,\n      }));\n    case END_ROUND:\n      return state.map((player) => ({\n        ...player,\n        penalties: [\n          ...player.penalties,\n          ...filterPenaltiesForPlayerId(action.penalties, player.id),\n        ],\n        isRoundWinner: player.id === action.winner,\n      }));\n    case START_CYCLE:\n      return state.map((player) => ({ ...player, order: findPlayerOrder(action.orderedPlayerIds, player) }));\n    case END_CYCLE:\n      return state.map((player) => ({\n        ...player,\n        isCycleHighestTurnPlayer: isPlayerIdOneOfHighestTurnPlayers(action.highestTurnPlayerIds, player.id),\n      }));\n    case START_PLAYER_TURN:\n      return state.map((player) => ({\n        ...player,\n        isServerRequestingCards: action.playerId === player.id,\n      }));\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from 'redux';\nimport playerReducer, { PlayerState } from './gamePlayers.reducer';\nimport stateReducer, { State as GameState } from './gameState.reducer';\n\nexport interface State {\n  state: GameState;\n  players: PlayerState[];\n}\n\nexport default combineReducers<State>({\n  players: playerReducer,\n  state: stateReducer,\n});\n","import { PlayerId } from 'agurk-shared';\nimport { LobbyAction, SET_IS_IN_GAME, SET_LOBBY_PLAYERS } from './lobby.action';\n\nexport interface State {\n  players: PlayerId[];\n  isInGame: boolean;\n}\n\nconst INITIAL_STATE: State = {\n  players: [],\n  isInGame: false,\n};\n\nexport default function (state: State = INITIAL_STATE, action: LobbyAction): State {\n  switch (action.type) {\n    case SET_LOBBY_PLAYERS:\n      return {\n        ...state,\n        players: action.playerIds,\n      };\n    case SET_IS_IN_GAME:\n      return {\n        ...state,\n        isInGame: action.isInGame,\n      };\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from 'redux';\nimport authenticationReducer, { State as AuthenticationState } from './authentication.reducer';\nimport gameReducer, { State as GameState } from './game.reducer';\nimport lobbyReducer, { State as LobbyState } from './lobby.reducer';\n\nexport interface State {\n  authentication: AuthenticationState;\n  game: GameState;\n  lobby: LobbyState;\n}\n\nexport default combineReducers<State>({\n  authentication: authenticationReducer,\n  game: gameReducer,\n  lobby: lobbyReducer,\n});\n","import { applyMiddleware, createStore } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunk from 'redux-thunk';\nimport reducer from './root.reducer';\n\nexport default createStore(reducer, composeWithDevTools(applyMiddleware(thunk)));\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { StylesProvider as MuiStylesProvider } from '@material-ui/core/styles';\nimport { ThemeProvider as StyledComponentsThemeProvider } from 'styled-components';\nimport { ThemeProvider as MuiThemeProvider } from '@material-ui/core';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\nimport './index.css';\nimport 'typeface-roboto';\nimport theme from './theme';\nimport store from './redux/store';\n\nReactDOM.render(\n  <Provider store={store}>\n    <MuiThemeProvider theme={theme}>\n      <StyledComponentsThemeProvider theme={theme}>\n        <MuiStylesProvider injectFirst>\n          <App />\n        </MuiStylesProvider>\n      </StyledComponentsThemeProvider>\n    </MuiThemeProvider>\n  </Provider>,\n  document.getElementById('root'),\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}